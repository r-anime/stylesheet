language: python
python:
- '3.6'

install:
- pip install -r utils/requirements.txt

script:
# Updates on master go to /r/anime
- if [ "$TRAVIS_BRANCH" = "master" ]; then python utils/build.py --subreddit_name anime; fi
# All other branches go to /r/animestaging for testing
- if [ "$TRAVIS_BRANCH" != "master" ]; then python utils/build.py --subreddit_name animestaging; fi

deploy:
- on:
    all_branches: true
  provider: script
  script: python utils/update.py
  skip_cleanup: true
